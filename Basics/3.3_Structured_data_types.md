### **Structured Data Types trong Elasticsearch**
Elasticsearch cung cấp một số **structured data types** để làm việc với các kiểu dữ liệu có cấu trúc đặc biệt. Những kiểu dữ liệu này cho phép lưu trữ và tìm kiếm các giá trị phức tạp như khoảng giá trị (ranges), địa chỉ IP, phiên bản phần mềm, và các giá trị băm (hashes).

---

### **1. `Range`**
#### **Mô tả**:
- `Range` lưu trữ một khoảng giá trị. Elasticsearch hỗ trợ các loại range sau:
  - **`long_range`**: Khoảng giá trị số nguyên.
  - **`double_range`**: Khoảng giá trị số thực.
  - **`date_range`**: Khoảng thời gian.
  - **`ip_range`**: Khoảng giá trị địa chỉ IP.

#### **Ví dụ**:
**Mapping:**
```json
PUT /example_index
{
  "mappings": {
    "properties": {
      "price_range": { "type": "double_range" },
      "date_range": { "type": "date_range" }
    }
  }
}
```

**Document:**
```json
PUT /example_index/_doc/1
{
  "price_range": { "gte": 10.0, "lte": 50.0 },
  "date_range": { "gte": "2025-01-01", "lte": "2025-12-31" }
}
```

**Kết quả:**
- Trường `price_range` lưu trữ khoảng giá trị từ 10.0 đến 50.0.
- Trường `date_range` lưu trữ khoảng thời gian từ ngày 01/01/2025 đến 31/12/2025.

**Truy vấn tìm tài liệu trong khoảng giá trị:**
```json
GET /example_index/_search
{
  "query": {
    "range": {
      "price_range": {
        "gte": 20.0,
        "lte": 40.0
      }
    }
  }
}
```

---

### **2. `ip`**
#### **Mô tả**:
- `ip` dùng để lưu trữ địa chỉ IPv4 và IPv6.
- Thường dùng trong các ứng dụng liên quan đến mạng, như phân tích log hoặc địa chỉ IP của người dùng.

#### **Ví dụ**:
**Mapping:**
```json
PUT /example_index
{
  "mappings": {
    "properties": {
      "ip_address": { "type": "ip" }
    }
  }
}
```

**Document:**
```json
PUT /example_index/_doc/1
{
  "ip_address": "192.168.1.1"
}
```

**Kết quả:**
- Trường `ip_address` lưu trữ địa chỉ IP `192.168.1.1`.

**Truy vấn tìm tài liệu với địa chỉ IP cụ thể:**
```json
GET /example_index/_search
{
  "query": {
    "term": {
      "ip_address": "192.168.1.1"
    }
  }
}
```

**Truy vấn tìm tài liệu trong một dải IP:**
```json
GET /example_index/_search
{
  "query": {
    "range": {
      "ip_address": {
        "gte": "192.168.1.1",
        "lte": "192.168.1.255"
      }
    }
  }
}
```

---

### **3. `version`**
#### **Mô tả**:
- `version` được sử dụng để lưu trữ phiên bản của phần mềm.
- Hỗ trợ quy tắc **Semantic Versioning (SemVer)** để so sánh và sắp xếp các phiên bản.

#### **Ví dụ**:
**Mapping:**
```json
PUT /example_index
{
  "mappings": {
    "properties": {
      "software_version": { "type": "version" }
    }
  }
}
```

**Document:**
```json
PUT /example_index/_doc/1
{
  "software_version": "1.2.3"
}

PUT /example_index/_doc/2
{
  "software_version": "2.0.0"
}
```

**Kết quả:**
- Elasticsearch lưu trữ các phiên bản `1.2.3` và `2.0.0`.

**Truy vấn tìm tài liệu với phiên bản lớn hơn một giá trị cụ thể:**
```json
GET /example_index/_search
{
  "query": {
    "range": {
      "software_version": {
        "gte": "1.5.0"
      }
    }
  }
}
```

---

### **4. `murmur3`**
#### **Mô tả**:
- `murmur3` lưu trữ giá trị băm (hash) được tính toán từ giá trị đầu vào bằng thuật toán **MurmurHash3**.
- Thường được dùng để so sánh hoặc nhận diện các giá trị mà không cần lưu trữ bản gốc.

#### **Ví dụ**:
**Mapping:**
```json
PUT /example_index
{
  "mappings": {
    "properties": {
      "hash_value": { "type": "murmur3" }
    }
  }
}
```

**Document:**
```json
PUT /example_index/_doc/1
{
  "hash_value": "HelloWorld"
}
```

**Kết quả:**
- Elasticsearch tự động tính toán giá trị băm của `"HelloWorld"` và lưu trữ nó.

**Truy vấn tìm tài liệu với hash cụ thể:**
```json
GET /example_index/_search
{
  "query": {
    "term": {
      "hash_value": "computed_hash_string"
    }
  }
}
```

---

### **So sánh các Structured Data Types**

| **Kiểu Dữ Liệu** | **Mô Tả**                                                                 | **Dùng Khi Nào**                                                                                   | **Hạn Chế**                                         |
|-------------------|---------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------|---------------------------------------------------|
| **`Range`**       | Lưu trữ một khoảng giá trị (long, double, date, ip).                     | Khi cần lưu các khoảng giá trị hoặc khoảng thời gian.                                              | Không phù hợp cho các giá trị đơn lẻ.             |
| **`ip`**          | Lưu địa chỉ IPv4 và IPv6.                                                | Khi làm việc với dữ liệu mạng, như địa chỉ IP của người dùng hoặc log.                              | Không hỗ trợ các định dạng khác ngoài IP.         |
| **`version`**     | Lưu trữ phiên bản phần mềm, hỗ trợ SemVer.                               | Khi cần so sánh hoặc sắp xếp các phiên bản phần mềm.                                                | Chỉ áp dụng cho định dạng version.               |
| **`murmur3`**     | Lưu giá trị băm của dữ liệu với thuật toán MurmurHash3.                  | Khi cần lưu trữ và so sánh giá trị băm thay vì dữ liệu gốc.                                         | Không thể truy vấn giá trị ban đầu từ hash.       |

---

### **Link Tài Liệu Chính Thức**
Để tìm hiểu thêm chi tiết, bạn có thể tham khảo tài liệu Elasticsearch:
- [Elasticsearch Field Data Types Documentation](https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-types.html)

Nếu bạn cần thêm ví dụ hoặc giải thích chi tiết hơn, hãy cho tôi biết nhé!